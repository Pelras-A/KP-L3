"0","#######################################################################################"
"0","###                                 Disjonctif                                      ###"
"0","#######################################################################################"
"0",""
"0","#without : variable ou il ne faut pas faire de disjonctif "
"0","categorial <- function(data, without){"
"0","  "
"0","  name <- colnames(data[,-which(colnames(data) %in% without)])"
"0","  nb <- length(name)"
"0","  var<- NULL"
"0","  for (col in 1:nb) {"
"0","    i <- name[col]"
"0","    if (is.factor(data[,i])){"
"0","      if (length(levels(data[,i]))>2){"
"0","        if (substr(levels(data[,i])[1], 1, 6) == substr(levels(data[,i])[2], 1, 6)) {"
"0","          for (j in 1:length(levels(data[,i]))) {"
"0","            data$a <- as.factor(ifelse(data[,i] == sort(levels(data[,i]))[j], 1, 0))"
"0","            colnames(data)[ncol(data)] <- str_replace(paste0(i,""_"",substr(sort(levels(data[,i]))[j],1,9)),"" "","""")"
"0","            var <- c(var, i)"
"0","          }"
"0","        }else {"
"0","          for (j in 2:length(levels(data[,i]))) {"
"0","            data$a <- as.factor(ifelse(data[,i] == sort(levels(data[,i]))[j], 1, 0))"
"0","            colnames(data)[ncol(data)] <- str_replace(paste0(i,""_"",substr(sort(levels(data[,i]))[j],1,6)),"" "","""")"
"0","            var <- c(var, i)"
"0","          }"
"0","        }"
"0","      } "
"0","    }"
"0","  }"
"0","  data <- data[,-which(colnames(data) %in% var)]"
"0","  return(data)"
"0","}"
"0",""
"0","#######################################################################################"
"0",""
"0","#######################################################################################"
"0",""
"0","num_name <- names(data[,unlist(lapply(data, is.numeric), use.names = FALSE) ]) # nom des variables numeriques"
"0",""
"0","data <- categorial(data, c(num_name))"
"0",""
"0","data$Sexe <- as.integer(as.numeric(data$Sexe)-1)"
"0","data$Resection.primitif <- as.integer(as.numeric(data$Resection.primitif)-1)"
"0","data$Protocole_L1groupebis <- as.integer(as.numeric(data$Protocole_L1groupebis)-1)"
"0","data$Epuisement.therap <- as.integer(as.numeric(data$Epuisement.therap)-1)"
"0","data$OMS_L3.regroupe <- as.integer(as.numeric(data$OMS_L3.regroupe)-1)"
"0","data$Meta.pulm_L3 <- as.integer(as.numeric(data$Meta.pulm_L3)-1)"
"0","data$Censure.SG <- as.integer(as.numeric(data$Censure.SG)-1)"
"0",""
"0",""
"0","fac_name <- names(data[,unlist(lapply(data, is.factor), use.names = FALSE) ])"
"0","data[,fac_name] <- lapply(data[,fac_name], as.numeric)"
"0","data[,fac_name] <- data[,fac_name]-1"
"0","data[,fac_name] <- lapply(data[,fac_name], as.integer)"
"0",""
"0","rm(num_name)"
"0",""
